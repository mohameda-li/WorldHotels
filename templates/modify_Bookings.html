<!DOCTYPE html>
<html lang="en">
<head>
    <title>Manage Bookings</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='projectMainPagecss.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='manage_bookings.css') }}">
</head>
<body>

<!-- Sidebar Navigation -->
<nav class="sidebar-nav">
    <a href="/"><img src="{{ url_for('static', filename='stimages/W_logo.jpg') }}" class="logo"></a>
    <div class="navbar" id="Navlinks">
        <ul>
            <li><a href="/">Home</a></li>
            {% if 'user_id' in session %}
                <li><a href="/logout">Logout</a></li>
                {% if session['role'] == 'admin' %}
                    <li><a href="/admin_dashboard">Admin Dashboard</a></li>
                    <li><a href="/manage_hotels">Manage Hotels</a></li>
                    <li><a href="/manage_bookings">Manage Bookings</a></li>
                    <li><a href="/manage_users">Manage Users</a></li>
                {% endif %}
                <li><a href="/my_bookings">My Bookings</a></li>
            {% else %}
                <li><a href="/login.html">Login/Register</a></li>
            {% endif %}
            <li><a href="/Information.html">Information</a></li>
        </ul>
    </div>
</nav>

<!-- Main Content -->
<div class="main-wrapper">
    <div class="booking-table-container">
        <h1>Manage Bookings</h1>

        {% with messages = get_flashed_messages() %}
        {% if messages %}
            <div class="flash-message">
                {% for message in messages %}
                    {{ message }}
                {% endfor %}
            </div>
        {% endif %}
        {% endwith %}

        <!-- Search Form -->
        <form method="GET" action="{{ url_for('admin.manage_bookings') }}" class="search-form">
            <input type="text" name="query" placeholder="Search by Booking ID or Username">
            <button type="submit">Search</button>
        </form>

        <!-- Booking Table -->
        <table>
            <thead>
                <tr>
                    <th>Booking ID</th>
                    <th>User ID</th>
                    <th>Hotel ID</th>
                    <th>Room ID</th>
                    <th>Check-in</th>
                    <th>Check-out</th>
                    <th>Guests</th>
                    <th>Status</th>
                    <th>Actions</th>
                </tr>
            </thead>
            <tbody>
                {% for booking in bookings %}
                <tr>
                    <td>{{ booking[0] }}</td>
                    <td>{{ booking[1] }}</td>
                    <td>{{ booking[2] }}</td>
                    <td>{{ booking[3] }}</td>
                    <td>{{ booking[4] }}</td>
                    <td>{{ booking[5] }}</td>
                    <td>{{ booking[6] }}</td>
                    <td>{{ booking[7] }}</td>
                    <td>
                        <a href="{{ url_for('admin.edit_booking', booking_id=booking[0]) }}">Edit</a> |
                        <a href="{{ url_for('admin.delete_booking', booking_id=booking[0]) }}" onclick="return confirm('Are you sure you want to delete this booking?')">Delete</a>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
</body>
</html>
